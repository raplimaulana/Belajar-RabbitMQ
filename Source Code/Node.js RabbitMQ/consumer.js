import {connect} from "amqplib";

/////////////////////////////////////////////////////////////////////
// Membuat Connection //
/////////////////////////////////////////////////////////////////////
const connection = await connect("amqp://guest:guest@localhost:5672/");
const channel = await connection.createChannel();
/////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////
// Membuat Consumer //
/////////////////////////////////////////////////////////////////////
await channel.consume("sms", function (message){
    console.info(message.fields.routingKey);
    console.info(message.content.toString());
}, {
    noAck: true
})
/////////////////////////////////////////////////////////////////////

// await channel.close();
// await connection.close();
